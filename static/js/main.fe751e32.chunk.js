(this.webpackJsonptarea3=this.webpackJsonptarea3||[]).push([[0],{48:function(t,e,s){"use strict";s.r(e),e.default=s.p+"static/media/markerIcon.f1573f89.jpg"},88:function(t,e,s){},90:function(t,e,s){"use strict";s.r(e);var a=s(11),i=s(23),n=s(24),c=s(26),o=s(25),r=s(0),l=s.n(r),h=s(22),j=s.n(h),d=s(31),b=s.n(d),p=s(50),O=s.n(p),u=s(92),m=s(93),f=s(94),v=s(95),g=s(96),x=(s(87),s(88),s(2)),N=(s.n(x).a.icon({iconUrl:s(48),iconRetinaUrl:s(48),iconAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[35,35],className:"leaflet-venue-icon"}),s(1)),k=prompt("ingresar usuario"),w=function(t){Object(c.a)(s,t);var e=Object(o.a)(s);function s(t){var a;return Object(i.a)(this,s),(a=e.call(this,t)).handleSubmit=function(t){var e=t.target.value;if(13===t.keyCode&&e){var s={name:k,message:e};a.socket.emit("CHAT",s),t.target.value=""}},a.state={messages:[]},a}return Object(n.a)(s,[{key:"componentDidMount",value:function(){var t=this;this.socket=b()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/",{path:"/flights",transports:["websocket"]}),this.socket.on("CHAT",(function(e){t.setState({messages:[e].concat(Object(a.a)(t.state.messages))})}))}},{key:"render",value:function(){var t=this.state.messages.map((function(t,e){return Object(N.jsx)("li",{children:Object(N.jsxs)("b",{children:[O()(new Date(parseInt(t.date))).format("DD MM YYYY hh:mm:ss")," ","- ",t.name,": ",t.message]})},e)}));return Object(N.jsxs)("div",{children:[Object(N.jsx)("h1",{children:"Chat"}),Object(N.jsx)("input",{type:"text",placeholder:"",onKeyUp:this.handleSubmit}),t]})}}]),s}(l.a.Component),y=function(t){Object(c.a)(s,t);var e=Object(o.a)(s);function s(t){var a;return Object(i.a)(this,s),(a=e.call(this,t)).handleRequest=function(t){console.log("lo hicimos"),a.socket.emit("FLIGHTS")},a.state={positions:{},flights:[]},a}return Object(n.a)(s,[{key:"componentDidMount",value:function(){var t=this;this.socket=b()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/",{path:"/flights",transports:["websocket"]}),this.socket.on("POSITION",(function(e){var s=t.state.positions;void 0==s[e.code]?(s[e.code]={},s[e.code].position=e.position):(void 0==s[e.code].prevPos?s[e.code].prevPos=[]:s[e.code].prevPos=[].concat(Object(a.a)(s[e.code].prevPos),[s[e.code].position]),s[e.code].position=e.position),t.setState({positions:s})})),this.socket.on("FLIGHTS",(function(e){t.setState({flights:e})}))}},{key:"render",value:function(){var t=[],e=[];for(var s in this.state.positions)t=[Object(N.jsx)(u.a,{position:this.state.positions[s].position,children:Object(N.jsx)(m.a,{children:s})})].concat(Object(a.a)(t)),void 0!==this.state.positions[s].prevPos&&(e=[Object(N.jsx)(f.a,{pathOptions:{color:"red"},positions:this.state.positions[s].prevPos})].concat(Object(a.a)(e)));var i=[],n=[],c=[];for(var o in this.state.flights){for(var r in this.state.flights[o].passengers)n=[Object(N.jsx)("div",{children:Object(N.jsxs)("p",{children:[this.state.flights[o].passengers[r].name,","," ",this.state.flights[o].passengers[r].age," a\xf1os"]})})].concat(Object(a.a)(n));i=[Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"data-container",children:[Object(N.jsx)("p",{className:"label",children:"Codigo: "}),Object(N.jsx)("p",{className:"data",children:this.state.flights[o].code})]}),Object(N.jsxs)("div",{className:"data-container",children:[Object(N.jsx)("p",{className:"label",children:"aerolinea: "}),Object(N.jsx)("p",{className:"data",children:this.state.flights[o].airline})]}),Object(N.jsxs)("div",{className:"data-container",children:[Object(N.jsx)("p",{className:"label",children:"origen: "}),Object(N.jsx)("p",{className:"data",children:this.state.flights[o].origin})]}),Object(N.jsxs)("div",{className:"data-container",children:[Object(N.jsx)("p",{className:"label",children:"destino: "}),Object(N.jsx)("p",{className:"data",children:this.state.flights[o].destination})]}),Object(N.jsxs)("div",{className:"data-container",children:[Object(N.jsx)("p",{className:"label",children:"avion: "}),Object(N.jsx)("p",{className:"data",children:this.state.flights[o].plane})]}),Object(N.jsxs)("div",{className:"data-container",children:[Object(N.jsx)("p",{className:"label",children:"Asientos: "}),Object(N.jsx)("p",{className:"data",children:this.state.flights[o].seats})]}),Object(N.jsxs)("div",{className:"data-container",children:[Object(N.jsx)("p",{className:"label",children:"Pasajeros: "}),n]})]})].concat(Object(a.a)(i)),c=[Object(N.jsx)(f.a,{pathOptions:{color:"green"},positions:[this.state.flights[o].origin,this.state.flights[o].destination]})].concat(Object(a.a)(e))}return Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{onClick:this.handleRequest,children:"Pedir informacion"}),Object(N.jsx)("div",{className:"flights-info",children:i}),Object(N.jsxs)(v.a,{center:{lat:"4.6973985",lng:"13.41053"},zoom:2,children:[Object(N.jsx)(g.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t,e,c]})]})}}]),s}(l.a.Component),S=function(t){Object(c.a)(s,t);var e=Object(o.a)(s);function s(t){return Object(i.a)(this,s),e.call(this,t)}return Object(n.a)(s,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(y,{}),Object(N.jsx)(w,{})]})}}]),s}(l.a.Component);j.a.render(Object(N.jsx)(S,{}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.fe751e32.chunk.js.map